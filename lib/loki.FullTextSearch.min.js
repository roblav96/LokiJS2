!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("FullTextSearch",[],e):"object"==typeof exports?exports.FullTextSearch=e():(t.Loki=t.Loki||{},t.Loki.FullTextSearch=e())}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(t,e,r){"use strict";function n(t){let e=[],r=t.split(/[^\w]/);for(let t=0;t<r.length;t++)""!==r[t]&&e.push(r[t].toLowerCase());return e}var i=r(1);class o{constructor(){this._splitter=null,this._queue=[],this._symbol=Symbol("label"),this.reset()}setSplitter(t,e){if(t=i.a(t),!i.e(e))throw TypeError("Splitter must be a function.");if(""===t)throw Error("Label cannot be empty.");e[this._symbol]=t,this._splitter=e}getSplitter(){return[this._splitter[this._symbol],this._splitter]}resetSplitter(){this._splitter=n}has(t){return-1!==this._getPosition(t)}get(t){let e=this._getPosition(t);if(-1===e)throw Error("Cannot find existing function.");return[this._queue[e][this._symbol],this._queue[e]]}add(t,e){this._addFunction(t,e,this._queue.length)}addBefore(t,e,r){let n=this._getPosition(t);if(-1===n)throw Error("Cannot find existing function.");this._addFunction(e,r,n)}addAfter(t,e,r){let n=this._getPosition(t);if(-1===n)throw Error("Cannot find existing function.");this._addFunction(e,r,n+1)}remove(t){let e=this._getPosition(t);if(-1===e)throw Error("Cannot find existing function.");this._queue.splice(e,1)}reset(){this._splitter=n,this._queue=[]}tokenize(t){let e=this._splitter(t);for(let t=0;t<this._queue.length;t++)e=this._queue[t](e);return e}toJSON(){let t={tokenizers:[]};this._splitter!==n&&(t.splitter=this._splitter[this._symbol]);for(let e=0;e<this._queue.length;e++)t.tokenizers.push(this._queue[e][this._symbol]);return t}static fromJSON(t,e){let r=new o;if(void 0!==e&&e instanceof o){if(t.hasOwnProperty("splitter")){let n=e.getSplitter();if(t.splitter!==n[0])throw Error("Splitter function not found.");r.setSplitter(n[0],n[1])}for(let n=0;n<t.tokenizers.length;n++){if(!e.has(t.tokenizers[n]))throw Error("Tokenizer function not found.");let i=e.get(t.tokenizers[n]);r.add(i[0],i[1])}}else{if(t.hasOwnProperty("splitter")){if(!e.splitters.hasOwnProperty(t.splitter))throw Error("Splitter function not found.");r.setSplitter(t.splitter,e.splitters[t.splitter])}for(let n=0;n<t.tokenizers.length;n++){if(!e.tokenizers.hasOwnProperty(t.tokenizers[n]))throw Error("Tokenizer function not found.");r.add(t.tokenizers[n],e.tokenizers[t.tokenizers[n]])}}return r}_getPosition(t){if(i.e(t))return this._queue.indexOf(t);if(!i.f(t))throw TypeError("Type of labelFunc must be string or function.");t=String(t);for(let e=0;e<this._queue.length;e++)if(this._queue[e][this._symbol]===t)return e;return-1}_addFunction(t,e,r){if(t=i.a(t),!i.e(e))throw TypeError("Type of func must be function.");if(""===t)throw Error("Label cannot be empty.");e[this._symbol]=t,this._queue.splice(r,0,e)}}e.a=o},function(t,e,r){"use strict";function n(t){return"[object Function]"===Object.prototype.toString.call(t)}function i(t){return"[object Object]"===Object.prototype.toString.call(t)}function o(t){return"[object Number]"===Object.prototype.toString.call(t)}function s(t){return"[object Boolean]"===Object.prototype.toString.call(t)}function h(t){return"[object String]"===Object.prototype.toString.call(t)}function u(t){return h(t)||o(t)||i(t)&&Object.prototype.toString!==t.toString&&h(t.toString())}function a(t,e=TypeError("Value is not convertible to boolean")){if(s(t)||o(t))return Boolean(t);throw e}function c(t,e=TypeError("Value is not convertible to string.")){if(u(t))return String(t);throw e}function f(t,e=TypeError("Value is not convertible to an array of strings.")){if(!Array.isArray(t))throw e;let r=[];for(let n=0;n<t.length;n++){if(!u(t[n]))throw e;r.push(String(t[n]))}return r}e.e=n,e.b=o,e.f=u,e.d=a,e.a=c,e.c=f},function(t,e,r){"use strict";var n=r(1);class i{constructor(t,e={}){this._data=e,this._data.type=n.a(t)}boost(t){if(!n.b(t)||t<0)throw TypeError("Boost must be a positive number.");return this._data.boost=t,this}build(){return this._data}}class o extends i{constructor(t,e,r={}){super("term",r),this._data.field=n.a(t),this._data.value=n.a(e)}}class s extends i{constructor(t,e,r={}){super("terms",r),this._data.field=n.a(t),this._data.value=n.c(e)}}class h extends i{constructor(t,e,r={}){super("wildcard",r),this._data.field=n.a(t),this._data.value=n.a(e)}}class u extends i{constructor(t,e,r={}){super("fuzzy",r),this._data.field=n.a(t),this._data.value=n.a(e)}fuzziness(t){if(!n.b(t)||t<0)throw TypeError("Fuzziness must be a positive number.");return this._data.fuzziness=t,this}prefixLength(t){if(!n.b(t)||t<0)throw TypeError("Prefix length must be a positive number.");return this._data.prefix_length=t,this}}class a extends i{constructor(t,e,r={}){super("prefix",r),this._data.field=n.a(t),this._data.value=n.a(e)}}class c extends i{constructor(t,e={}){super("exists",e),this._data.field=n.a(t)}}class f extends i{constructor(t,e,r={}){super("match",r),this._data.field=n.a(t),this._data.value=n.a(e)}minimumShouldMatch(t){if(!n.b(t)||t<0)throw TypeError("Value for minimum should match must be a positive number.");if(this._data.hasOwnProperty("operator")&&"and"==this._data.operator)throw SyntaxError('Match query with "and" operator does not support minimum should match.');return this._data.minimum_should_match=t,this}operator(t){if("and"!=(t=n.a(t))&&"or"!=t)throw SyntaxError("Unknown operator.");if(this._data.operator=t,this._data.hasOwnProperty("minimum_should_match")&&"and"==this._data.operator)throw SyntaxError('Match query with "and" operator does not support minimum should match.');return this}fuzziness(t){if(!n.b(t)||t<0)throw TypeError("Fuzziness must be a positive number.");return this._data.fuzziness=t,this}prefixLength(t){if(!n.b(t)||t<0)throw TypeError("Prefix length must be a positive number.");return this._data.prefix_length=t,this}}class l extends i{constructor(t={}){super("match_all",t)}}class d extends i{constructor(t,e,r={}){super("array",r),this._data.values=[],this._callbackName=t,this[t]=e,this._prepare=((t,...e)=>{let r={};let n=new t(...e,r);this._data.values.push(r);n.bool=this.bool;n.constantScore=this.constantScore;n.term=this.term;n.terms=this.terms;n.wildcard=this.wildcard;n.fuzzy=this.fuzzy;n.match=this.match;n.matchAll=this.matchAll;n.prefix=this.prefix;n.exists=this.exists;n._prepare=this._prepare;n[this._callbackName]=this[this._callbackName];return n})}bool(){return this._prepare(_)}constantScore(){return this._prepare(p)}term(t,e){return this._prepare(o,t,e)}terms(t,e){return this._prepare(s,t,e)}wildcard(t,e){return this._prepare(h,t,e)}fuzzy(t,e){return this._prepare(u,t,e)}match(t,e){return this._prepare(f,t,e)}matchAll(){return this._prepare(l)}prefix(t,e){return this._prepare(a,t,e)}exists(t){return this._prepare(c,t)}}class p extends i{constructor(t={}){super("constant_score",t)}startFilter(){return this._data.filter={},new d("endFilter",()=>this,this._data.filter)}}class _ extends i{constructor(t={}){super("bool",t)}startMust(){return this._data.must={},new d("endMust",()=>this,this._data.must)}startFilter(){return this._data.filter={},new d("endFilter",()=>this,this._data.filter)}startShould(){return this._data.should={},new d("endShould",()=>this,this._data.should)}startNot(){return this._data.not={},new d("endNot",()=>this,this._data.not)}minimumShouldMatch(t){if("number"!=typeof t||t<0)throw TypeError("Minimum should match must be a number greater than zero.");return this._data.minimum_should_match=t,this}}class g{constructor(){this._data={query:{}},this.useBM25()}enableFinalScoring(t){return this._data.final_scoring=n.d(t),this}useBM25(t=1.2,e=.75){if(!n.b(t)||t<0)throw TypeError("BM25s k1 must be a positive number.");if(!n.b(e)||e<0||e>1)throw TypeError("BM25s b must be a number between 0 and 1 inclusive.");return this._data.scoring={type:"BM25",k1:t,b:e},this}bool(){return this._prepare(_)}constantScore(){return this._prepare(p)}term(t,e){return this._prepare(o,t,e)}terms(t,e){return this._prepare(s,t,e)}wildcard(t,e){return this._prepare(h,t,e)}fuzzy(t,e){return this._prepare(u,t,e)}match(t,e){return this._prepare(f,t,e)}matchAll(){return this._prepare(l)}prefix(t,e){return this._prepare(a,t,e)}exists(t){return this._prepare(c,t)}_prepare(t,...e){return this._child=new t(...e,this._data.query),this._child.build=(()=>this._data),this._child}}e.a=g},function(t,e,r){"use strict";var n=r(0);class i{constructor(t=!0,e=new n.a){this._store=t,this._tokenizer=e,this._docCount=0,this._docStore={},this._totalFieldLength=0,this._root={}}get store(){return this._store}get tokenizer(){return this._tokenizer}get documentCount(){return this._docCount}get documentStore(){return this._docStore}get totalFieldLength(){return this._totalFieldLength}get root(){return this._root}insert(t,e,r=1){if(this._docStore.hasOwnProperty(e))throw Error("Field already added.");this._docCount+=1,this._docStore[e]={};let n=this._tokenizer.tokenize(t);this._totalFieldLength+=n.length;let i=[];this._docStore[e]={fieldLength:n.length,boost:r},Object.defineProperties(this._docStore[e],{termRefs:{enumerable:!1,configurable:!0,writable:!0,value:i}});for(let t of new Set(n))if(""!==t){let r=0;for(let e=0;e<n.length;e++)n[e]===t&&r++;let o=this._root;for(let e=0;e<t.length;e++){let r=t[e];if(!o.hasOwnProperty(r)){let t={};Object.defineProperties(t,{parent:{enumerable:!1,configurable:!0,writable:!0,value:o}}),o[r]=t}o=o[r]}o.hasOwnProperty("docs")||(o.docs={},o.df=0),o.docs[e]=r,o.df+=1,i.push(o)}}remove(t){if(this._docStore.hasOwnProperty(String(t))){let e=this._docStore[t];delete this._docStore[t],this._docCount-=1,this._totalFieldLength-=e.fieldLength;let r=e.termRefs;for(let e=0;e<r.length;e++){let n=r[e];if(n.df-=1,delete n.docs[t],0===n.df){let t=[];do{let e=n.parent;delete n.parent,t=Object.keys(e);for(let r=0;r<t.length;r++){let i=t[r];if("df"!==i&&"docs"!==i&&e[i]===n){delete e[i];break}}n=e}while(n.hasOwnProperty("parent")&&1===t.length)}}}}static getTermIndex(t,e,r=0){if(r>=t.length)return null;for(let n=r;n<t.length;n++){if(!e.hasOwnProperty(t[n]))return null;e=e[t[n]]}return e}static getNextTermIndex(t){let e=[],r=Object.keys(t);for(let n=0;n<r.length;n++)"docs"!==r[n]&&"df"!==r[n]&&e.push({index:t[r[n]],term:r[n]});return e}static extendTermIndex(t){let e=[],r=[t],n=[""];do{let t=r.pop(),i=n.pop();t.hasOwnProperty("df")&&e.push({index:t,term:i});let o=Object.keys(t);for(let e=0;e<o.length;e++)"docs"!==o[e]&&"df"!==o[e]&&(r.push(t[o[e]]),n.push(i+o[e]))}while(0!==r.length);return e}toJSON(){return this._store?this:{_tokenizer:this._tokenizer}}loadJSON(t,e){function r(t,e){null!==e&&Object.defineProperties(t,{parent:{enumerable:!1,configurable:!0,writable:!1,value:e}});let n=Object.keys(t);for(let e=0;e<n.length;e++)if("docs"===n[e]){let e=Object.keys(t.docs);for(let r=0;r<e.length;r++){let n=o._docStore[e[r]];n.hasOwnProperty("termRefs")||Object.defineProperties(n,{termRefs:{enumerable:!1,configurable:!0,writable:!0,value:[]}}),n.termRefs.push(t)}}else"df"!==n[e]&&r(t[n[e]],t)}let i=t;this._tokenizer=n.a.fromJSON(i._tokenizer,e),this._docCount=i._docCount,this._docStore=i._docStore,this._totalFieldLength=i._totalFieldLength,this._root=i._root;let o=this;r(this._root,null)}}e.a=i},function(t,e,r){"use strict";var n=r(3),i=r(6),o=r(0),s=r(1);class h{constructor(t){if(void 0===t)throw new SyntaxError("Fields needs to be defined!");if(this._invIdxs={},!Array.isArray(t))throw new TypeError("fields needs to be an array with field name and a tokenizer (optional).");for(let e=0;e<t.length;e++){let r=t[e],i=s.a(r.name,TypeError("Field name needs to be a string.")),h=!r.hasOwnProperty("store")||s.d(r.store,TypeError("Field store flag needs to be a boolean")),u=null;if(r.hasOwnProperty("tokenizer")){if(!(r.tokenizer instanceof o.a))throw new TypeError("Field tokenizer needs to be a instance of tokenizer.");u=r.tokenizer}else u=new o.a;this._invIdxs[i]=new n.a(h,u)}this._docs=new Set,this._idxSearcher=new i.a(this._invIdxs,this._docs)}addDocument(t,e={}){if(!t.hasOwnProperty("$loki"))throw new Error("Document is not stored in the collection.");let r=Object.keys(t);for(let n,i=0;r.length,n=r[i];i++)if(this._invIdxs.hasOwnProperty(n)){let r=e.hasOwnProperty(n)?e[n]:1;this._invIdxs[n].insert(t[n],t.$loki,r)}this._docs.add(t.$loki),this.setDirty()}removeDocument(t){if(!t.hasOwnProperty("$loki"))throw new Error("Document is not stored in the collection.");let e=Object.keys(this._invIdxs);for(let r=0;r<e.length;r++)this._invIdxs[e[r]].remove(t.$loki);this._docs.delete(t.$loki),this.setDirty()}updateDocument(t,e={}){this.removeDocument(t),this.addDocument(t,e)}search(t){return this._idxSearcher.search(t)}toJSON(){let t={},e=Object.keys(this._invIdxs);for(let r,n=0;e.length,r=e[n];n++)t[r]=this._invIdxs[r].toJSON();return t}loadJSON(t,e){let r=JSON.parse(t),i=Object.keys(r);for(let t,o=0;i.length,t=i[o];o++)this._invIdxs[t]=new n.a,this._invIdxs[t].loadJSON(r[t],e[t])}setDirty(){this._idxSearcher.setDirty()}}e.a=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),i=r(0),o=r(2);r.d(e,"FullTextSearch",function(){return n.a}),r.d(e,"Tokenizer",function(){return i.a}),r.d(e,"QueryBuilder",function(){return o.a})},function(t,e,r){"use strict";var n=r(7),i=r(3),o=r(2);class s{constructor(t,e){this._invIdxs=t,this._docs=e,this._scorer=new n.a(this._invIdxs)}search(t){let e=this._recursive(t.query,!0);return!t.hasOwnProperty("final_scoring")||t.final_scoring?this._scorer.finalScore(t,e):e}setDirty(){this._scorer.setDirty()}_recursive(t,e){let r={},n=t.hasOwnProperty("boost")?t.boost:1,s=t.hasOwnProperty("field")?t.field:null,a=null,c=null;switch(this._invIdxs.hasOwnProperty(s)&&(a=this._invIdxs[s].root,c=this._invIdxs[s].tokenizer),t.type){case"bool":if(r=null,t.hasOwnProperty("must")&&(r=this._getUnique(t.must.values,e,r)),t.hasOwnProperty("filter")&&(r=this._getUnique(t.filter.values,!1,r)),t.hasOwnProperty("should")){let n=this._getAll(t.should.values,e),i=!1;null===r&&(r={},i=!0);let o=t.hasOwnProperty("minimum_should_match")?t.minimum_should_match:1,s=Object.keys(n);for(let t,e=0;s.length,t=s[e];e++)n[t].length>=o&&(r.hasOwnProperty(t)?r[t].push(...n[t]):i?r[t]=n[t]:delete r[t])}if(t.hasOwnProperty("not")){let e=this._getAll(t.not.values,!1),n=Object.keys(e);for(let t,e=0;n.length,t=n[e];e++)r.hasOwnProperty(t)&&delete r[t]}break;case"term":{let o=i.a.getTermIndex(t.value,a);this._scorer.prepare(s,n,o,e,r,t.value);break}case"terms":for(let o=0;o<t.value.length;o++){let h=i.a.getTermIndex(t.value[o],a);this._scorer.prepare(s,n,h,e,r,t.value[o])}break;case"fuzzy":{let i=new h(t),o=i.search(a);for(let t=0;t<o.length;t++)this._scorer.prepare(s,n*o[t].boost,o[t].index,e,r,o[t].term);break}case"wildcard":{let i=new u(t),o=i.search(a);for(let t=0;t<o.length;t++)this._scorer.prepare(s,n,o[t].index,e,r,o[t].term);break}case"match_all":for(let t of this._docs)this._scorer.scoreConstant(n,t,r);break;case"constant_score":{r=this._getAll(t.filter.values,!1);let e=Object.keys(r);for(let t=0;t<e.length;t++)this._scorer.scoreConstant(n,e[t],r);break}case"prefix":{let o=i.a.getTermIndex(t.value,a);null!=o&&(o=i.a.extendTermIndex(o));for(let i=0;i<o.length;i++)this._scorer.prepare(s,n,o[i].index,e,r,t.value+o[i].term);break}case"exists":if(null!=a){let t=Object.keys(this._invIdxs[s].documentStore);for(let e=0;e<t.length;e++)this._scorer.scoreConstant(n,t[e],r)}break;case"match":{let i=c.tokenize(t.value),h=t.hasOwnProperty("operator")?t.operator:"or",u=(new o.a).bool();if("or"===h?(t.hasOwnProperty("minimum_should_match")&&(u=u.minimumShouldMatch(t.minimum_should_match)),u=u.startShould()):u=u.startMust(),u=u.boost(n),t.hasOwnProperty("fuzziness")){let e=t.hasOwnProperty("prefix_length")?t.prefix_length:2;for(let r=0;r<i.length;r++)u=u.fuzzy(s,i[r]).fuzziness(t.fuzziness).prefixLength(e)}else for(let t=0;t<i.length;t++)u=u.term(s,i[t]);u="or"===h?u.endShould():u.endMust(),r=this._recursive(u.build(),e);break}}return r}_getUnique(t,e,r){if(0===t.length)return r;for(let n=0;n<t.length;n++){let i=this._recursive(t[n],e);if(null!==r){let t=Object.keys(r);for(let e,n=0;t.length,e=t[n];n++)i.hasOwnProperty(e)?r[e].push(...i[e]):delete r[e]}else r=this._recursive(t[0],e)}return r}_getAll(t,e){let r={};for(let n=0;n<t.length;n++){let i=this._recursive(t[n],e),o=Object.keys(i);for(let t,e=0;o.length,t=o[e];e++)r.hasOwnProperty(t)?r[t].push(...i[t]):r[t]=i[t]}return r}}e.a=s;class h{constructor(t){this._fuzzy=t.value,this._fuzziness=t.hasOwnProperty("fuzziness")?t.fuzziness:2,this._prefixLength=t.hasOwnProperty("prefix_length")?t.prefix_length:2}levenshtein_distance(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;let r,n,i,o,s;t.length>e.length&&(r=t,t=e,e=r);var h=Array(t.length+1);for(n=0;n<=t.length;n++)h[n]=n;for(n=1;n<=e.length;n++){for(o=n,i=1;i<=t.length;i++)e[n-1]===t[i-1]?s=h[i-1]:(s=Math.min(h[i-1]+1,Math.min(o+1,h[i]+1)),n>1&&i>1&&e[n-2]===t[i-1]&&t[i-2]===e[n-1]&&(s=Math.min(s,h[i-1]-(t[i-1]===e[n-1]?1:0)))),h[i-1]=o,o=s;h[t.length]=o}return h[t.length]}search(t){let e=t,r=this._fuzzy.slice(0,this._prefixLength),n=this._fuzzy;if(0!=this._prefixLength&&(e=i.a.getTermIndex(r,e),n=n.slice(this._prefixLength)),null===e)return[];let o=[],s=[e],h=[""];do{let t=s.pop(),e=h.pop();if(t.hasOwnProperty("df")&&Math.abs(n.length-e.length)<=this._fuzziness){const i=this.levenshtein_distance(n,e);if(i<=this._fuzziness){let n=1-i/(r.length+e.length);o.push({term:r+e,index:t,boost:n})}}if(e.length-n.length<=this._fuzziness){let r=Object.keys(t);for(let n=0;n<r.length;n++)"docs"!==r[n]&&"df"!==r[n]&&(s.push(t[r[n]]),h.push(e+r[n]))}}while(0!==s.length);return o}}class u{constructor(t){this._wildcard=t.value,this._result=[]}search(t){return this._result=[],this._recursive(t),this._result}_recursive(t,e=0,r="",n=!1){if(null!==t){if(e===this._wildcard.length)return void(t.hasOwnProperty("df")&&this._result.push({index:t,term:r}));if(n||"\\"!==this._wildcard[e])if(n||"?"!==this._wildcard[e])if(n||"*"!==this._wildcard[e])this._recursive(i.a.getTermIndex(this._wildcard[e],t),e+1,r+this._wildcard[e]);else{let n=i.a.extendTermIndex(t);for(let t=0;t<n.length;t++)this._recursive(n[t].index,e+1,r+n[t].term)}else{let n=i.a.getNextTermIndex(t);for(let t=0;t<n.length;t++)this._recursive(n[t].index,e+1,r+n[t].term)}else this._recursive(t,e+1,r,!0)}}}},function(t,e,r){"use strict";class n{constructor(t){this._invIdxs=t,this._cache={}}setDirty(){this._cache={}}prepare(t,e,r,n,i={},o=null){if(null==r||!r.hasOwnProperty("docs"))return null;let s=this._idf(t,r.df),h=Object.keys(r.docs);for(let u=0;u<h.length;u++){let a=h[u];if(i.hasOwnProperty(a)||(i[a]=[]),n){let n=r.docs[a];i[a].push({type:"BM25",tf:n,idf:s,boost:e,fieldName:t,term:o})}else i[a].push({type:"constant",value:1,boost:e,fieldName:t,term:o})}return i}scoreConstant(t,e,r={}){return r.hasOwnProperty(e)||(r[e]=[]),r[e].push({type:"constant",value:1,boost:t}),r}finalScore(t,e={}){let r={},n=t.scoring.k1,i=t.scoring.b,o=Object.keys(e);for(let t,s=0;o.length,t=o[s];s++){let o=0;for(let r=0;r<e[t].length;r++){let s=e[t][r],h=0;switch(s.type){case"BM25":{let e=this._invIdxs[s.fieldName].documentStore[t].fieldLength/Math.pow(this._invIdxs[s.fieldName].documentStore[t].boost,2),r=this._avgFieldLength(s.fieldName),o=(n+1)*s.tf/(n*(1-i+i*(e/r))+s.tf);h=s.idf*o*s.boost;break}case"constant":h=s.value*s.boost}o+=h}r[t]=o}return r}_getCache(t){if(!this._cache.hasOwnProperty(t)){let e=this._invIdxs[t].totalFieldLength/this._invIdxs[t].documentCount;this._cache[t]={idfs:{},avgFieldLength:e}}return this._cache[t]}_idf(t,e){let r=this._getCache(t);return r.idfs.hasOwnProperty(String(e))?r.idfs[e]:r.idfs[e]=Math.log(1+(this._invIdxs[t].documentCount-e+.5)/(e+.5))}_avgFieldLength(t){return this._getCache(t).avgFieldLength}}e.a=n}])});
//# sourceMappingURL=loki.FullTextSearch.min.js.map